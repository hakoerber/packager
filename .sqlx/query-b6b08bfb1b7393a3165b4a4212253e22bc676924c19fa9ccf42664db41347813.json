{
  "db_name": "PostgreSQL",
  "query": "WITH one AS (\n    SELECT\n        product.id AS id,\n        product.user_id AS user_id,\n        product.name AS name,\n        product.description AS description,\n        product.price AS price,\n        product.bought_at AS bought_at,\n        product.bought_from AS bought_from,\n        array_remove(array_agg(link.id), NULL) AS link_ids,\n        array_remove(array_agg(link.name), NULL) AS link_names,\n        array_remove(array_agg(link.url), NULL) AS link_urls\n    FROM\n        products AS product\n        LEFT JOIN product_links AS link ON link.product_id = product.id\n    GROUP BY\n        product.id\n),\ntwo AS (\n    SELECT\n        product.id AS id,\n        array_remove(array_agg(comment.id), NULL) AS comment_ids,\n        array_remove(array_agg(comment.content), NULL) AS comment_contents,\n        array_remove(array_agg(comment.date), NULL) AS comment_dates\n    FROM\n        products AS product\n        LEFT JOIN product_comments AS comment ON comment.product_id = product.id\n    GROUP BY\n        product.id\n),\nproduct AS (\n    SELECT\n        one.id AS id,\n        one.user_id AS user_id,\n        one.name AS name,\n        one.description AS description,\n        one.price AS price,\n        one.bought_at AS bought_at,\n        one.bought_from AS bought_from,\n        one.link_ids AS link_ids,\n        one.link_names AS link_names,\n        one.link_urls AS link_urls,\n        two.comment_ids AS comment_ids,\n        two.comment_contents AS comment_contents,\n        two.comment_dates AS comment_dates\n    FROM\n        one\n        INNER JOIN two ON one.id = two.id\n)\nSELECT\n    product.id AS id,\n    product.name AS name,\n    product.description AS description,\n    product.price AS price,\n    product.bought_at AS purchase_date,\n    product.bought_from AS purchase_from,\n    product.link_ids AS \"link_ids!\",\n    product.link_names AS \"link_names!\",\n    product.link_urls AS \"link_urls!\",\n    product.comment_ids AS \"comment_ids!\",\n    product.comment_contents AS \"comment_contents!\",\n    product.comment_dates AS \"comment_dates!\"\nFROM\n    product\nWHERE\n    product.id = $1\n    AND product.user_id = $2\n",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "id",
        "type_info": "Uuid"
      },
      {
        "ordinal": 1,
        "name": "name",
        "type_info": "Text"
      },
      {
        "ordinal": 2,
        "name": "description",
        "type_info": "Text"
      },
      {
        "ordinal": 3,
        "name": "price",
        "type_info": "Money"
      },
      {
        "ordinal": 4,
        "name": "purchase_date",
        "type_info": "Date"
      },
      {
        "ordinal": 5,
        "name": "purchase_from",
        "type_info": "Text"
      },
      {
        "ordinal": 6,
        "name": "link_ids!",
        "type_info": "UuidArray"
      },
      {
        "ordinal": 7,
        "name": "link_names!",
        "type_info": "TextArray"
      },
      {
        "ordinal": 8,
        "name": "link_urls!",
        "type_info": "TextArray"
      },
      {
        "ordinal": 9,
        "name": "comment_ids!",
        "type_info": "UuidArray"
      },
      {
        "ordinal": 10,
        "name": "comment_contents!",
        "type_info": "TextArray"
      },
      {
        "ordinal": 11,
        "name": "comment_dates!",
        "type_info": "DateArray"
      }
    ],
    "parameters": {
      "Left": [
        "Uuid",
        "Uuid"
      ]
    },
    "nullable": [
      false,
      false,
      true,
      true,
      true,
      true,
      null,
      null,
      null,
      null,
      null,
      null
    ]
  },
  "hash": "b6b08bfb1b7393a3165b4a4212253e22bc676924c19fa9ccf42664db41347813"
}
